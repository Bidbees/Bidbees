version: 1
frontend:
  phases:
    preBuild:
      commands:
        - pwd
        - ls -la
        - echo "Checking repository contents:"
        - find . -maxdepth 3 -type d
        - echo "Checking .git directory:"
        - ls -la .git
        - echo "Checking for .gitattributes content:"
        - cat .gitattributes
        - echo "Trying to access Bidder_Dashboard directly:"
        - ls -la Bidder_Dashboard || echo "Bidder_Dashboard directory not found"
        - echo "Using Admin_Dashboard as fallback:"
        - cd Admin_Dashboard
        - npm install
    build:
      commands:
        - npm run build
  artifacts:
    # Admin_Dashboard outputs to dist
    baseDirectory: Admin_Dashboard/dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - Admin_Dashboard/node_modules/**/*